# this is the raw data for the markdown document

# internal performance test without network
# https://www.truenas.com/community/threads/performance-test.114552/

# switch to pool (big-pool, draid1, 5x Samsung SSD 990 PRO)
# write test bs=1M
# power: 36W
sudo fio --ramp_time=5 --gtod_reduce=1 --numjobs=1 --bs=1M --size=100G --runtime=60s --readwrite=write --name=testfile

testfile: (g=0): rw=write, bs=(R) 1024KiB-1024KiB, (W) 1024KiB-1024KiB, (T) 1024KiB-1024KiB, ioengine=psync, iodepth=1
fio-3.33
Starting 1 process
testfile: Laying out IO file (1 file / 102400MiB)
Jobs: 1 (f=1): [W(1)][100.0%][w=452MiB/s][w=452 IOPS][eta 00m:00s]
testfile: (groupid=0, jobs=1): err= 0: pid=59189: Tue Aug 19 00:40:07 2025
  write: IOPS=411, BW=412MiB/s (432MB/s)(24.2GiB/60092msec); 0 zone resets
   bw (  KiB/s): min=303936, max=634880, per=100.00%, avg=422284.55, stdev=45185.32, samples=119
   iops        : min=  296, max=  620, avg=412.16, stdev=44.12, samples=119
  cpu          : usr=5.08%, sys=34.29%, ctx=51751, majf=0, minf=41
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, >=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     issued rwts: total=0,24747,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=1

Run status group 0 (all jobs):
  WRITE: bw=412MiB/s (432MB/s), 412MiB/s-412MiB/s (432MB/s-432MB/s), io=24.2GiB (25.9GB), run=60092-60092msec


# write test bs=100k
# power: 36W
sudo fio --ramp_time=5 --gtod_reduce=1 --numjobs=1 --bs=100K --size=100G --runtime=60s --readwrite=write --name=testfile

testfile: (g=0): rw=write, bs=(R) 100KiB-100KiB, (W) 100KiB-100KiB, (T) 100KiB-100KiB, ioengine=psync, iodepth=1
fio-3.33
Starting 1 process
testfile: Laying out IO file (1 file / 102400MiB)
Jobs: 1 (f=1): [W(1)][98.5%][w=615MiB/s][w=6302 IOPS][eta 00m:01s]
testfile: (groupid=0, jobs=1): err= 0: pid=8543: Tue Aug 19 09:11:54 2025
  write: IOPS=6687, BW=653MiB/s (685MB/s)(38.3GiB/60007msec); 0 zone resets
   bw (  KiB/s): min=349500, max=989221, per=99.98%, avg=668596.59, stdev=91546.37, samples=116
   iops        : min= 3495, max= 9892, avg=6685.59, stdev=915.47, samples=116
  cpu          : usr=2.64%, sys=70.01%, ctx=66791, majf=0, minf=39
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, >=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     issued rwts: total=0,401275,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=1

Run status group 0 (all jobs):
  WRITE: bw=653MiB/s (685MB/s), 653MiB/s-653MiB/s (685MB/s-685MB/s), io=38.3GiB (41.1GB), run=60007-60007msec


# read test bs=1M
# power: 33W
sudo fio --ramp_time=5 --gtod_reduce=1 --numjobs=1 --bs=1M --size=100G --runtime=60s --readwrite=read --name=testfile

testfile: (g=0): rw=read, bs=(R) 1024KiB-1024KiB, (W) 1024KiB-1024KiB, (T) 1024KiB-1024KiB, ioengine=psync, iodepth=1
fio-3.33
Starting 1 process
Jobs: 1 (f=1): [R(1)][100.0%][r=2264MiB/s][r=2264 IOPS][eta 00m:00s]
testfile: (groupid=0, jobs=1): err= 0: pid=59417: Tue Aug 19 00:43:33 2025
  read: IOPS=1592, BW=1593MiB/s (1670MB/s)(93.3GiB/60008msec)
   bw (  MiB/s): min=  724, max= 2272, per=99.80%, avg=1589.37, stdev=675.92, samples=119
   iops        : min=  724, max= 2272, avg=1589.34, stdev=675.95, samples=119
  cpu          : usr=1.23%, sys=98.64%, ctx=521, majf=0, minf=38
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, >=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     issued rwts: total=95564,0,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=1

Run status group 0 (all jobs):
   READ: bw=1593MiB/s (1670MB/s), 1593MiB/s-1593MiB/s (1670MB/s-1670MB/s), io=93.3GiB (100GB), run=60008-60008msec

# read test bs=100k
# power: 33W
sudo fio --ramp_time=5 --gtod_reduce=1 --numjobs=1 --bs=100K --size=100G --runtime=60s --readwrite=read --name=testfile

testfile: (g=0): rw=read, bs=(R) 100KiB-100KiB, (W) 100KiB-100KiB, (T) 100KiB-100KiB, ioengine=psync, iodepth=1
fio-3.33
Starting 1 process
Jobs: 1 (f=1): [R(1)][93.5%][r=2305MiB/s][r=23.6k IOPS][eta 00m:04s]
testfile: (groupid=0, jobs=1): err= 0: pid=9210: Tue Aug 19 09:25:43 2025
  read: IOPS=18.4k, BW=1800MiB/s (1887MB/s)(93.3GiB/53069msec)
   bw (  MiB/s): min= 1274, max= 2313, per=100.00%, avg=1800.08, stdev=445.10, samples=106
   iops        : min=13050, max=23694, avg=18432.74, stdev=4557.89, samples=106
  cpu          : usr=1.20%, sys=98.70%, ctx=443, majf=0, minf=37
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, >=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     issued rwts: total=978145,0,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=1

Run status group 0 (all jobs):
   READ: bw=1800MiB/s (1887MB/s), 1800MiB/s-1800MiB/s (1887MB/s-1887MB/s), io=93.3GiB (100GB), run=53069-53069msec


# switch to pool (data-pool, shared with OS - partitioned, 1x Samsung SSD 990 PRO)
# write test bs=1M
# power: 26W
sudo fio --ramp_time=5 --gtod_reduce=1 --numjobs=1 --bs=1M --size=100G --runtime=60s --readwrite=write --name=testfile

testfile: (g=0): rw=write, bs=(R) 1024KiB-1024KiB, (W) 1024KiB-1024KiB, (T) 1024KiB-1024KiB, ioengine=psync, iodepth=1
fio-3.33
Starting 1 process
testfile: Laying out IO file (1 file / 102400MiB)
Jobs: 1 (f=1): [W(1)][100.0%][w=441MiB/s][w=441 IOPS][eta 00m:00s]
testfile: (groupid=0, jobs=1): err= 0: pid=59823: Tue Aug 19 00:50:10 2025
  write: IOPS=450, BW=450MiB/s (472MB/s)(26.4GiB/60123msec); 0 zone resets
   bw (  KiB/s): min=264192, max=756247, per=100.00%, avg=461576.65, stdev=65634.57, samples=119
   iops        : min=  258, max=  738, avg=450.48, stdev=64.08, samples=119
  cpu          : usr=5.38%, sys=40.40%, ctx=62807, majf=0, minf=44
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, >=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     issued rwts: total=0,27065,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=1

Run status group 0 (all jobs):
  WRITE: bw=450MiB/s (472MB/s), 450MiB/s-450MiB/s (472MB/s-472MB/s), io=26.4GiB (28.4GB), run=60123-60123msec

# write test bs=100K
# power: 26W
sudo fio --ramp_time=5 --gtod_reduce=1 --numjobs=1 --bs=100K --size=100G --runtime=60s --readwrite=write --name=testfile

testfile: (g=0): rw=write, bs=(R) 100KiB-100KiB, (W) 100KiB-100KiB, (T) 100KiB-100KiB, ioengine=psync, iodepth=1
fio-3.33
Starting 1 process
testfile: Laying out IO file (1 file / 102400MiB)
Jobs: 1 (f=1): [W(1)][100.0%][w=820MiB/s][w=8400 IOPS][eta 00m:00s]
testfile: (groupid=0, jobs=1): err= 0: pid=10155: Tue Aug 19 09:38:06 2025
  write: IOPS=9283, BW=907MiB/s (951MB/s)(53.1GiB/60003msec); 0 zone resets
   bw (  KiB/s): min=726946, max=1201200, per=100.00%, avg=929580.25, stdev=88243.65, samples=117
   iops        : min= 7269, max=12012, avg=9295.52, stdev=882.48, samples=117
  cpu          : usr=2.62%, sys=73.92%, ctx=103278, majf=0, minf=37
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, >=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     issued rwts: total=0,557027,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=1

Run status group 0 (all jobs):
  WRITE: bw=907MiB/s (951MB/s), 907MiB/s-907MiB/s (951MB/s-951MB/s), io=53.1GiB (57.0GB), run=60003-60003msec

# read test bs=1M
# power: 22W
sudo fio --ramp_time=5 --gtod_reduce=1 --numjobs=1 --bs=1M --size=100G --runtime=60s --readwrite=read --name=testfile

testfile: (g=0): rw=read, bs=(R) 1024KiB-1024KiB, (W) 1024KiB-1024KiB, (T) 1024KiB-1024KiB, ioengine=psync, iodepth=1
fio-3.33
Starting 1 process
Jobs: 1 (f=1): [R(1)][100.0%][r=1885MiB/s][r=1884 IOPS][eta 00m:00s]
testfile: (groupid=0, jobs=1): err= 0: pid=59961: Tue Aug 19 00:52:29 2025
  read: IOPS=1222, BW=1223MiB/s (1282MB/s)(71.7GiB/60021msec)
   bw (  MiB/s): min=  648, max= 1924, per=100.00%, avg=1223.77, stdev=547.44, samples=120
   iops        : min=  648, max= 1924, avg=1223.51, stdev=547.43, samples=120
  cpu          : usr=1.00%, sys=98.93%, ctx=281, majf=0, minf=37
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, >=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     issued rwts: total=73402,0,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=1

Run status group 0 (all jobs):
   READ: bw=1223MiB/s (1282MB/s), 1223MiB/s-1223MiB/s (1282MB/s-1282MB/s), io=71.7GiB (77.0GB), run=60021-60021msec

# read test bs=100K
# power: 22W
sudo fio --ramp_time=5 --gtod_reduce=1 --numjobs=1 --bs=100K --size=100G --runtime=60s --readwrite=read --name=testfile

testfile: (g=0): rw=read, bs=(R) 100KiB-100KiB, (W) 100KiB-100KiB, (T) 100KiB-100KiB, ioengine=psync, iodepth=1
fio-3.33
Starting 1 process
Jobs: 1 (f=1): [R(1)][93.1%][r=5146MiB/s][r=52.7k IOPS][eta 00m:04s]
testfile: (groupid=0, jobs=1): err= 0: pid=10482: Tue Aug 19 09:42:08 2025
  read: IOPS=20.2k, BW=1971MiB/s (2067MB/s)(93.4GiB/48542msec)
   bw (  MiB/s): min= 1123, max= 5843, per=99.92%, avg=1969.75, stdev=1466.86, samples=97
   iops        : min=11507, max=59838, avg=20170.11, stdev=15020.80, samples=97
  cpu          : usr=1.52%, sys=98.38%, ctx=638, majf=0, minf=40
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, >=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     issued rwts: total=979896,0,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=1

Run status group 0 (all jobs):
   READ: bw=1971MiB/s (2067MB/s), 1971MiB/s-1971MiB/s (2067MB/s-2067MB/s), io=93.4GiB (100GB), run=48542-48542msec
